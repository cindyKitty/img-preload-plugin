<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
	<title>图片预加载之有序加载</title>
	<style type="text/css">
	    a{
	    	text-decoration: none;
	    }
	    img{
	      max-width: 1200px;
	    }
		.box {
		   text-align:center; 
		}
		.btn {
			display: inline-block;
			height: 30px;
			line-height: 30px;
			border:1px solid #ccc;
			background-color: #fff;
			padding: 0 10px;
			margin-right: 50px;
			color: #333;
		}
		.btn:hover{
			background-color: #ddd;
		}
	</style>
</head>
<body>
<div class="box">
    <img id="img" src="http://mvimg2.meitudata.com/56f66638bac8f619.jpg" />
    <p>
    	<a href="javascript:;" class="btn" data-control="prev">上一页</a>
    	<a href="javascript:;" class="btn" data-control="next">下一页</a>
    </p>
  </div>
   <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
   <script src="js/preload.js"></script>
   <script type="text/javascript">
   	/*var imgs = [
	  "http://mvimg2.meitudata.com/56f66638bac8f619.jpg",
	  "http://mvimg1.meitudata.com/56efcb602ad0f8545.jpg",
	  "http://mvimg1.meitudata.com/56f66832339477906.jpg",
	  "https://a-ssl.duitang.com/uploads/item/201403/17/20140317112914_4wLaj.thumb.700_0.jpeg",
	  "http://mvimg2.meitudata.com/56f4dac9bac9b1515.jpg",
	  "http://mvimg2.meitudata.com/55e12f60c910b848.jpg!thumb480",
	  "http://cdn.duitang.com/uploads/item/201402/07/20140207224418_YVLUt.thumb.600_0.jpeg"
	];
	var len = imgs.length,
	    count = 0,
	    index = 0;
	load();
	// 有序预加载
	function load() {
	  var imgObj = new Image();
	  // 每次图片加载完成或错误执行的代码
	  $(imgObj).on('load error', function () {
	  	if(count >=len) {
	  	  // 所有图片已经加载完毕
	  	} else {
	  		load();
	  	}
	  	count++;
	  });

	  imgObj.src = imgs[count];
	}

    $('.btn').on('click',function(){
		if($(this).data('control') ==='prev'){//上一张			
		  index = Math.max(0,--index)
		} else {//下一张
		  index = Math.min(len-1, ++index)
		}
		document.title = (index+1) + '/' +len;
		$('#img').attr('src', imgs[index]);
	})*/

	var imgs = [
	  "http://mvimg2.meitudata.com/56f66638bac8f619.jpg",
	  "http://mvimg1.meitudata.com/56efcb602ad0f8545.jpg",
	  "http://mvimg1.meitudata.com/56f66832339477906.jpg",
	  "https://a-ssl.duitang.com/uploads/item/201403/17/20140317112914_4wLaj.thumb.700_0.jpeg",
	  "http://mvimg2.meitudata.com/56f4dac9bac9b1515.jpg",
	  "http://mvimg2.meitudata.com/55e12f60c910b848.jpg!thumb480",
	  "http://cdn.duitang.com/uploads/item/201402/07/20140207224418_YVLUt.thumb.600_0.jpeg"
	];
	var len = imgs.length,
	    index = 0;

	$.preload(imgs, {
		order: 'ordered'
	})

    $('.btn').on('click',function(){
		if($(this).data('control') ==='prev'){//上一张			
		  index = Math.max(0,--index)
		} else {//下一张
		  index = Math.min(len-1, ++index)
		}
		document.title = (index+1) + '/' +len;
		$('#img').attr('src', imgs[index]);
	})
   </script>
</body>
</html>